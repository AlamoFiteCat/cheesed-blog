(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Lvw3:function(t,e,r){"use strict";r.r(e),r.d(e,"ProfileModule",(function(){return T}));var o=r("ofXK"),a=r("FpXt"),s=r("tyNb"),n=r("3Pt+");const i=t=>{const e=t.get("password"),r=t.get("confirmPassword");return e.value===r.value?null:{notMatching:!0}};var c=r("fXoL"),b=r("AytR"),d=r("tk/3"),l=r("5eHb");let m=(()=>{class t{constructor(t,e,r){this.http=t,this.router=e,this.toastr=r}changeUserPassword(t){this.http.put(b.a.apiUrl+"/profile/password",{newPassword:t},{withCredentials:!0}).subscribe(t=>{this.toastr.success(t.message,"Success!")},t=>{this.toastr.error(t.message,"Error!")})}deleteUserAccount(){this.http.delete(b.a.apiUrl+"/profile",{withCredentials:!0}).subscribe(()=>{this.toastr.warning("User deleted. :(","Success!"),this.router.navigate(["/posts"])},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(c.Xb(d.a),c.Xb(s.a),c.Xb(l.b))},t.\u0275prov=c.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=r("Wp6s"),p=r("kmnG"),f=r("qFsG"),w=r("bTqV");const h=[{path:"",component:(()=>{class t{constructor(t){this.profileService=t,this.changePasswordForm=new n.f({password:new n.d(null,[n.o.required,n.o.pattern(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/)]),confirmPassword:new n.d(null,n.o.required)},{validators:i}),this.deleteUserForm=new n.f({emailConfirmation:new n.d(null,[n.o.required,n.o.email])})}ngOnInit(){}onSubmitNewPassword(){this.profileService.changeUserPassword(this.changePasswordForm.value.password)}onSubmitDeleteUser(){this.profileService.deleteUserAccount()}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(m))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-profile"]],decls:34,vars:4,consts:[[1,"card"],[1,"form",3,"formGroup"],[1,"form-field"],["matInput","","formControlName","password","type","password"],["matInput","","formControlName","confirmPassword","type","password"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"formGroup"],[1,"example-full-width"],["matInput","","type","email","formControlName","emailConfirmation"]],template:function(t,e){1&t&&(c.Tb(0,"mat-card",0),c.Tb(1,"mat-card-header"),c.Tb(2,"mat-card-title"),c.Bc(3,"Change your paswword"),c.Sb(),c.Tb(4,"mat-card-subtitle"),c.Bc(5,"Enter your new password below, and again in the confirmation box."),c.Sb(),c.Sb(),c.Tb(6,"form",1),c.Tb(7,"mat-card-content"),c.Tb(8,"mat-form-field",2),c.Tb(9,"mat-label"),c.Bc(10,"New Password"),c.Sb(),c.Ob(11,"input",3),c.Sb(),c.Tb(12,"mat-form-field",2),c.Tb(13,"mat-label"),c.Bc(14,"Confirm Password"),c.Sb(),c.Ob(15,"input",4),c.Sb(),c.Sb(),c.Tb(16,"mat-card-actions"),c.Tb(17,"button",5),c.ac("click",(function(){return e.onSubmitNewPassword()})),c.Bc(18," Submit "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(19,"mat-card",0),c.Tb(20,"mat-card-header"),c.Tb(21,"mat-card-title"),c.Bc(22,"Delete Account"),c.Sb(),c.Tb(23,"mat-card-subtitle"),c.Bc(24,"This is an irreversible action! "),c.Sb(),c.Sb(),c.Tb(25,"form",6),c.Tb(26,"mat-card-content"),c.Tb(27,"mat-form-field",7),c.Tb(28,"mat-label"),c.Bc(29,"Email confirmation"),c.Sb(),c.Ob(30,"input",8),c.Sb(),c.Sb(),c.Tb(31,"mat-card-actions"),c.Tb(32,"button",5),c.ac("click",(function(){return e.onSubmitDeleteUser()})),c.Bc(33," Submit "),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t&&(c.Bb(6),c.kc("formGroup",e.changePasswordForm),c.Bb(11),c.kc("disabled",e.changePasswordForm.invalid),c.Bb(8),c.kc("formGroup",e.deleteUserForm),c.Bb(7),c.kc("disabled",e.deleteUserForm.invalid))},directives:[u.a,u.d,u.g,u.f,n.p,n.l,n.g,u.c,p.b,p.e,f.b,n.c,n.k,n.e,u.b,w.a],styles:[""]}),t})()},{path:"**",redirectTo:"posts"}];let S=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[o.c,s.c.forChild(h)],s.c]}),t})(),T=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[o.c,a.a,S]]}),t})()}}]);